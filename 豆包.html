<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>生活语文期末测评——教师调查图表</title>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Microsoft YaHei", "Helvetica Neue", Arial, "Noto Sans CJK SC", sans-serif; margin: 24px; }
    h1 { font-size: 20px; margin: 0 0 8px; }
    h2 { font-size: 18px; margin: 28px 0 8px; }
    p { color: #333; margin: 6px 0 14px; }
    .card { border: 1px solid #e5e7eb; border-radius: 10px; padding: 16px; margin-bottom: 22px; }
    .row { display: grid; grid-template-columns: 1fr; gap: 22px; }
    @media (min-width: 900px) { .row { grid-template-columns: 1fr 1fr; } }
    .foot { color: #666; font-size: 12px; margin-top: 6px; }
    canvas { width: 100%; height: 380px; }
  </style>
</head>
<body>
  <h1>生活语文期末测评——教师调查图表</h1>
  <p class="foot">示例数据：N=20位生活语文任课教师（可在源码中修改）。</p>

  <div class="row">
    <!-- 图1：任务类型占比对比 -->
    <div class="card">
      <h2>图1 现行测评占比 vs 教师期望占比（任务类型）</h2>
      <p>横轴：任务类型；纵轴：占比（%）。对比“现行测评结构”与“教师期望结构”。</p>
      <canvas id="barChart" aria-label="任务类型占比对比图" role="img"></canvas>
      <div class="foot">现行占比（示例）：识记60｜理解20｜应用15｜综合5；期望占比（示例）：识记30｜理解25｜应用30｜综合15。</div>
    </div>

    <!-- 图2：教师感知（是否能反映生活语言应用能力） -->
    <div class="card">
      <h2>图2 现有测评能否反映“生活语言应用能力”（教师感知）</h2>
      <p>5级选项：非常能 / 比较能 / 一般 / 较弱 / 完全不能。</p>
      <canvas id="pieChart" aria-label="教师感知饼图" role="img"></canvas>
      <div class="foot">示例分布：非常能5%｜比较能20%｜一般10%｜较弱40%｜完全不能25%。</div>
    </div>
  </div>

  <script>
    // ====== 可编辑数据（直接改数值即可） ======
    // 图1：任务类型占比（百分比）
    const labelsTypes = ['识记类', '理解类', '应用类（情境）', '综合类（跨情境）'];
    const currentRatio = [60, 20, 15, 5];   // 现行测评占比
    const expectedRatio = [30, 25, 30, 15]; // 教师期望占比

    // 图2：教师感知（百分比，总和100）
    const perceptionLabels = ['非常能', '比较能', '一般', '较弱', '完全不能'];
    const perceptionData = [5, 20, 10, 40, 25];

    // ====== 图1：柱状对比图 ======
    const barCtx = document.getElementById('barChart');
    new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: labelsTypes,
        datasets: [
          {
            label: '现行测评占比',
            data: currentRatio,
            borderWidth: 1
          },
          {
            label: '教师期望占比',
            data: expectedRatio,
            borderWidth: 1
          }
        ]
      },
      options: {
        responsive: true,
        interaction: { mode: 'index', intersect: false },
        plugins: {
          legend: { position: 'top' },
          tooltip: { callbacks: {
            label: (ctx) => `${ctx.dataset.label}: ${ctx.parsed.y}%`
          }},
          title: { display: false }
        },
        scales: {
          y: {
            beginAtZero: true,
            max: 100,
            ticks: { callback: (v) => v + '%' }
          }
        }
      }
    });

    // ====== 图2：饼图 ======
    const pieCtx = document.getElementById('pieChart');
    new Chart(pieCtx, {
      type: 'pie',
      data: {
        labels: perceptionLabels,
        datasets: [{
          data: perceptionData,
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'right' },
          tooltip: { callbacks: {
            label: (ctx) => `${ctx.label}: ${ctx.parsed}%`
          }},
          title: { display: false }
        }
      }
    });
  </script>
</body>
</html>
